---
- name: Download Claude Code install script
  ansible.builtin.get_url:
    url: https://claude.ai/install.sh
    dest: /tmp/claude-install.sh
    mode: "0755"

- name: Install Claude Code
  ansible.builtin.command: /tmp/claude-install.sh
  args:
    creates: ~/.local/bin/claude

- name: Install AI tools with uv
  ansible.builtin.command:
    cmd: "uv tool install {{ item }}"
  loop:
    - "skill-seekers"
  register: uv_install
  changed_when: "'Installed' in uv_install.stdout"
  failed_when:
    - uv_install.rc != 0
    - "'already installed' not in uv_install.stderr"
